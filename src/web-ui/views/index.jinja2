{% extends 'layout.html' %}
{% from '_macros.jinja2' import render_field, render_field_link %}
{% block content %}
<h2>Status</h2>
{{ render_field('Status', state) }}
{{ render_field('Sync mode', blockchain_state.sync_mode) }}
<div>
    <span class='name'><a href="./lca">Least common ancestor</a></span>
</div>
<div>
    <span class='name'>Tips</span>
    {% for tip in blockchain_state.tips %}
        {{ render_field_link('Height', tip.challenge.height, './blocks/' + tip.challenge.proof_of_space_hash | string | urlencode) }}
    {% endfor %}  
</div>


{{ render_field('Current difficulty', blockchain_state.difficulty) }}
{{ render_field('Current VDF iterations per second', blockchain_state.ips) }} 


<h3>Connections</h3>
{% for connection in connections %}
    {{ render_field_link(connection.type_name, connection.peer_host + ':' +  connection.peer_port | string + '/' + connection.peer_server_port | string, './connections/' + connection.node_id | string | urlencode) }}
{% endfor %}        


<h3>Latest Blocks</h3>
{% for b in latest_blocks %}
    {{ render_field_link('Height', b.challenge.height | string + ":" + b.header.data.prev_header_hash | string, './blocks/' + b.challenge.proof_of_space_hash | string | urlencode) }}
{% endfor %}     


<h3>Top Pool Winnings</h3>
{% for winner in top_winners %}
    {{ render_field('Public key', winner[2] | string + ' - ' + (winner[0] / 1000000000000) | string + ' chia') }}
{% endfor %}  


<h3>Our Pool Winnings</h3>
{% for winner in our_winners %}
    {{ render_field('Public key', winner[2] | string + ' - ' + (winner[0] / 1000000000000) | string + ' chia') }}
{% endfor %}  
{% endblock %}